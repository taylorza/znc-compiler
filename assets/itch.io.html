<h2>A native compiler for the ZX Spectrum Next</h2>
<hr>
<p>ZNC is a language and compiler for the ZX Spectrum Next. The language is closely modeled after the C programming language, but does deviate in some cases where it either made the language easier to parse or in other cases where I preferred an alternate syntax.</p>
<p>The compiler is a non-optimizing single pass compiler, while the generated code is not the fastest or the smallest it should outperform non-compiled languages.</p>
<h2>Language Features</h2>
<ul>
<li>Data Types
    <ul>
    <li>char/byte</li>
    <li>int</li>
    <li>arrays</li>
    <li>pointers</li>
    </ul>
</li>
<li>Flow control
    <ul>
        <li>if/else</li>
        <li>while/for loops</li>
    </ul>
</li>
<li>Expressions</li>
    <ul>    
        <li>Evaluated in accordance with operator precedence</li>
        <li>Parenthesised expressions</li>
        <li>Bitwise and logical operators</li>
    </ul>
<li>Inline assembly</li>
<li>Include files</li>
<li>User functions</li>
</ul>
<h2>Compiling code</h2>
Currently the compiler will generate a DOT Command. Compilation is a two stage process.
<ol>
<li>Compile the source code to assembly language
The following will compile a source file called demo.znc to a corresponding assembly file called demo.asm. These names do not need to match, but the assembly filename will be the base for the name of the final binary file.
<pre>
.znc demo.znc demo.asm
</pre>
</li>
<li>Assemble the file to the executable binary
Using the NextBASIC Inline Assembler, you assemble the generated assembly file to a binary.
<pre>
.asm demo.asm
</pre>
</li>
</ol>
Now you should have file called `demo` in the DOT directory on your SD Card. This DOT command can be tested by executing the following at the command line.
<pre>
.demo
</pre>
<h2>Examples</h2>
<h3>Hello world</h3>
Create a file called `hello.znc` and add the following content
<pre>
puts("Hello World");
</pre>
Next, compile and assemble the code
<pre>
.znc hello.znc hello.asm
.asm hello.asm
</pre>
And if you did not get any errors with the above, you can excute the program and you should see `Hello World` printed to the screen.
<h3>Bouncing ball</h3>
This is a more complex example that bounces a character on the screen.
<pre>
void gotoxy(byte x, byte y) {
  putc(22);putc(y);putc(x);
}

int x=15, y=10;
int dx=1, dy=1;
byte n = 0;

while (1) {
  __asm__ {
    halt
    ld a, (_n)
    out ($fe), a
  }
  
  gotoxy(x, y);
  putc(' ');
  x = x + dx;
  y = y + dy;
  if (x == 0 || x == 31) { dx = -dx; n=(n+1) & 7; }
  if (y == 0 || y == 21) { dy = -dy; n=(n+1) & 7; }
  gotoxy(x, y);
  putc('*');
}
</pre>

